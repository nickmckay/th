<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tyler's Fishing Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to bottom, #1a5490 0%, #2d7ab8 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.7);
            margin-bottom: 20px;
            font-size: 3em;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
            text-align: center;
        }

        .instructions h2 {
            color: #2E5266;
            margin-bottom: 10px;
        }

        .instructions p {
            font-size: 1.1em;
            line-height: 1.6;
        }

        .game-area {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        /* Bait Panel - Left Side */
        .bait-panel {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }

        .bait-panel h2 {
            color: #2E5266;
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .bait-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .bait-item {
            background: white;
            border: 3px solid #8B7355;
            border-radius: 10px;
            padding: 10px;
            cursor: grab;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .bait-item:active {
            cursor: grabbing;
        }

        .bait-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .bait-item img {
            width: 50px;
            height: 50px;
            object-fit: contain;
        }

        .bait-info {
            flex: 1;
        }

        .bait-name {
            font-weight: bold;
            color: #2E5266;
        }

        .bait-length {
            font-size: 0.85em;
            color: #666;
        }

        /* Fishing Scene - Right Side */
        .fishing-scene {
            position: relative;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .landscape {
            width: 100%;
            display: block;
        }

        .location-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
        }

        .drop-zone {
            flex: 1;
            transition: background 0.3s;
            position: relative;
        }

        .drop-zone.drag-over {
            background: rgba(255, 215, 0, 0.4);
            border: 4px solid #FFD700;
        }

        .location-label {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1.3em;
            font-weight: bold;
            pointer-events: none;
        }

        /* Fishing Animation Overlay */
        .fishing-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 200;
        }

        .fishing-overlay.active {
            display: flex;
        }

        .fishing-animation {
            text-align: center;
            color: white;
        }

        .fishing-animation h3 {
            font-size: 2em;
            margin-bottom: 20px;
        }

        /* Placeholder for fishing animation - you can replace this with your animation assets */
        .fishing-spinner {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            position: relative;
        }

        .fishing-spinner img {
            width: 100%;
            height: 100%;
            animation: bob 1s ease-in-out infinite;
        }

        @keyframes bob {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* Catch Result */
        .catch-result {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            z-index: 100;
            text-align: center;
        }

        .catch-result.show {
            display: block;
            animation: catchAppear 1s ease-out;
        }

        @keyframes catchAppear {
            0% {
                opacity: 0;
                transform: translate(-50%, -80%) scale(0.3);
            }
            60% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.2);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .catch-result img {
            max-width: 250px;
            max-height: 250px;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5));
        }

        .catch-message {
            background: rgba(0, 200, 0, 0.9);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.5em;
            font-weight: bold;
            margin-top: 15px;
        }

        .catch-message.trash {
            background: rgba(200, 0, 0, 0.9);
        }

        /* Fish Bag */
        .fish-bag {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }

        .bag-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .bag-header h2 {
            color: #2E5266;
        }

        .bag-stats {
            text-align: right;
        }

        .stat-line {
            font-size: 1.1em;
            margin: 5px 0;
        }

        .unique-fish {
            color: #4CAF50;
            font-weight: bold;
        }

        .total-items {
            color: #FF6B35;
            font-weight: bold;
        }

        .bag-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .bag-slot {
            aspect-ratio: 1;
            background: #f5f5f5;
            border: 2px dashed #ccc;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .bag-slot.filled {
            background: white;
            border: 2px solid #4CAF50;
        }

        .bag-slot.unhelpful {
            border: 3px solid #ff0000;
            background: #ffe0e0;
        }

        .bag-slot img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .bag-slot.duplicate::after {
            content: '‚úì';
            position: absolute;
            top: 2px;
            right: 2px;
            background: #4CAF50;
            color: white;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* Collection Display */
        .collection {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
            margin-top: 20px;
        }

        .collection h2 {
            color: #2E5266;
            margin-bottom: 15px;
            text-align: center;
        }

        .fish-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
        }

        .fish-item {
            background: white;
            border: 3px solid #ccc;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            transition: all 0.3s;
        }

        .fish-item img {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin-bottom: 5px;
        }

        .fish-item.caught {
            background: #E8F5E9;
            border-color: #4CAF50;
        }

        .fish-item.caught img {
            opacity: 1;
        }

        .fish-item.uncaught {
            background: #f5f5f5;
            border-style: dashed;
            opacity: 0.4;
        }

        .fish-item.uncaught img {
            filter: grayscale(100%) blur(3px);
            opacity: 0.3;
        }

        .fish-name {
            font-weight: bold;
            color: #2E5266;
            font-size: 0.9em;
        }

        /* Victory/Loss Screen */
        .game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #FFD700, #FFA500);
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            border: 6px solid #FF6B35;
            z-index: 1000;
            display: none;
            animation: gameOverAppear 0.5s ease-out;
        }

        .game-over.loss {
            background: linear-gradient(135deg, #FF6B6B, #C92A2A);
        }

        .game-over.show {
            display: block;
        }

        @keyframes gameOverAppear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .game-over h2 {
            color: #2E5266;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .game-over.loss h2 {
            color: white;
        }

        .game-over p {
            font-size: 1.3em;
            margin-bottom: 20px;
            color: #333;
        }

        .game-over.loss p {
            color: white;
        }

        .game-over .answer {
            font-size: 3em;
            font-weight: bold;
            color: #FF6B35;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin: 30px 0;
            letter-spacing: 2px;
        }

        .retry-btn {
            padding: 15px 40px;
            font-size: 1.3em;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
        }

        .retry-btn:hover {
            background: #45a049;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            display: none;
        }

        .overlay.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="overlay" id="overlay"></div>

    <div class="container">
        <h1>üé£ Tyler's Fishing Adventure üé£</h1>

        <div class="instructions">
            <h2>Mission: Catch All 12 Fish Before Your Bag Fills Up!</h2>
            <p>
                <strong>Drag bait</strong> to a fishing location (River, Lake, or Ocean) ‚Ä¢
                Catch all <strong>12 unique fish</strong> before filling your <strong>16-slot bag</strong>!
            </p>
        </div>

        <div class="game-area">
            <!-- Bait Selection -->
            <div class="bait-panel">
                <h2>ü™± Bait Box ü™±</h2>
                <div class="bait-list" id="baitList"></div>
            </div>

            <!-- Fishing Scene -->
            <div class="fishing-scene">
                <img src="assets/Background.png" alt="Fishing Landscape" class="landscape">
                <div class="location-overlay">
                    <div class="drop-zone" data-location="river"></div>
                    <div class="drop-zone" data-location="lake"></div>
                    <div class="drop-zone" data-location="ocean"></div>
                </div>

                <!-- Fishing Animation Overlay -->
                <div class="fishing-overlay" id="fishingOverlay">
                    <div class="fishing-animation">
                        <video id="fishingVideo" autoplay muted playsinline style="max-width: 90%; max-height: 80vh; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                            <source src="assets/short.mov" type="video/quicktime">
                            <source src="assets/short.mov" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>

                <!-- Catch Result -->
                <div class="catch-result" id="catchResult">
                    <img id="catchImage" src="" alt="Caught item">
                    <div class="catch-message" id="catchMessage"></div>
                </div>
            </div>
        </div>

        <!-- Sound Effects -->
        <audio id="castSound" preload="auto">
            <source src="assets/sounds/water-splash-02-352021.mp3" type="audio/mpeg">
        </audio>
        <audio id="catchFishSound" preload="auto">
            <source src="assets/sounds/fly-reel-fish-pulling-saricione-94671.mp3" type="audio/mpeg">
        </audio>
        <audio id="catchTrashSound" preload="auto">
            <source src="assets/sounds/fail-trumpet-02-383962.mp3" type="audio/mpeg">
        </audio>
        <audio id="wowSound" preload="auto">
            <source src="assets/sounds/surprised-male-wow-reaction-352683.mp3" type="audio/mpeg">
        </audio>

        <!-- Fish Bag -->
        <div class="fish-bag">
            <div class="bag-header">
                <h2>üéí Your Fish Bag</h2>
                <div class="bag-stats">
                    <div class="stat-line">Unique Fish: <span class="unique-fish" id="uniqueCount">0/12</span></div>
                    <div class="stat-line">Total Items: <span class="total-items" id="totalCount">0/16</span></div>
                </div>
            </div>
            <div class="bag-grid" id="bagGrid"></div>
        </div>

        <!-- Fish Collection Tracker -->
        <div class="collection">
            <h2>üêü Fish Species Checklist üêü</h2>
            <div class="fish-grid" id="fishGrid"></div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div class="game-over" id="gameOver">
        <h2 id="gameOverTitle"></h2>
        <p id="gameOverMessage"></p>
        <div class="answer" id="finalLocation"></div>
        <button class="retry-btn" onclick="resetGame()">Try Again</button>
    </div>

    <script>
        // EDIT THIS to change where the final clue leads
        const FINAL_LOCATION = "UNDER THE CHRISTMAS TREE";

        // Game State
        let fishBag = []; // Array to hold caught items (max 20)
        let caughtFishTypes = new Set(); // Track unique fish species

        // Bait configuration
        const baitOptions = [
            { name: 'Fly', length: 3, image: 'assets/bait/fly.png' },
            { name: 'Worm', length: 4, image: 'assets/bait/worm.png' },
            { name: 'Leech', length: 5, image: 'assets/bait/leech.png' },
            { name: 'Minnow', length: 6, image: 'assets/bait/minnow.png' },
            { name: 'Crawler', length: 7, image: 'assets/bait/crawler.png' },
            { name: 'Stinkbug', length: 8, image: 'assets/bait/stinkbug.png' },
            { name: 'Powerbait', length: 10, image: 'assets/bait/powerbait.png' }
        ];

        // Fish database - 12 fish across 3 locations (4 each)
        const fishDatabase = {
            river: [
                { name: 'Bass', length: 4, image: 'assets/fish/bass.png' },
                { name: 'Trout', length: 5, image: 'assets/fish/trout.png' },
                { name: 'Catfish', length: 7, image: 'assets/fish/catfish.png' },
                { name: 'Sturgeon', length: 8, image: 'assets/fish/sturgeon.png' }
            ],
            lake: [
                { name: 'Cod', length: 3, image: 'assets/fish/cod.png' },
                { name: 'Pike', length: 4, image: 'assets/fish/pike.png' },
                { name: 'Salmon', length: 6, image: 'assets/fish/salmon.png' },
                { name: 'Walleye', length: 7, image: 'assets/fish/walleye.png' }
            ],
            ocean: [
                { name: 'Tuna', length: 4, image: 'assets/fish/tuna.png' },
                { name: 'Shark', length: 5, image: 'assets/fish/shark.png' },
                { name: 'Marlin', length: 6, image: 'assets/fish/marlin.png' },
                { name: 'Bluegill', length: 8, image: 'assets/fish/bluegill.png' }
            ]
        };

        // Trash by location
        const trashItems = {
            river: [
                { name: 'Old Boot', image: 'assets/trash/old_boot.png' },
                { name: 'Stick', image: 'assets/trash/stick.png' },
                { name: 'Rusty Can', image: 'assets/trash/rusty_can.png' },
                { name: 'Bottle', image: 'assets/trash/bottle.png' }
            ],
            lake: [
                { name: 'Tire', image: 'assets/trash/tire.png' },
                { name: 'Algae Clump', image: 'assets/trash/algae_clump.png' },
                { name: 'Rock', image: 'assets/trash/rock.png' },
                { name: 'Plastic Bag', image: 'assets/trash/plastic_bag.png' }
            ],
            ocean: [
                { name: 'Kelp', image: 'assets/trash/kelp.png' },
                { name: 'Seashell', image: 'assets/trash/seashell.png' },
                { name: 'Driftwood', image: 'assets/trash/driftwood.png' },
                { name: 'Soda Bottle', image: 'assets/trash/soda_bottle.png' }
            ]
        };

        // Initialize game
        function init() {
            renderBaitList();
            renderBagGrid();
            renderFishGrid();
            setupDragAndDrop();
        }

        function renderBaitList() {
            const list = document.getElementById('baitList');
            list.innerHTML = '';

            baitOptions.forEach((bait, index) => {
                const baitDiv = document.createElement('div');
                baitDiv.className = 'bait-item';
                baitDiv.draggable = true;
                baitDiv.dataset.baitIndex = index;
                baitDiv.innerHTML = `
                    <img src="${bait.image}" alt="${bait.name}">
                    <div class="bait-info">
                        <div class="bait-name">${bait.name}</div>
                    </div>
                `;
                list.appendChild(baitDiv);
            });
        }

        function setupDragAndDrop() {
            // Bait drag start
            document.querySelectorAll('.bait-item').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('baitIndex', e.target.dataset.baitIndex);
                    e.target.style.opacity = '0.5';
                });

                item.addEventListener('dragend', (e) => {
                    e.target.style.opacity = '1';
                });
            });

            // Drop zones
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });

                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });

                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');

                    const baitIndex = e.dataTransfer.getData('baitIndex');
                    const location = zone.dataset.location;

                    castLine(baitIndex, location);
                });
            });
        }

        function castLine(baitIndex, location) {
            if (fishBag.length >= 16) {
                return; // Bag is full
            }

            const bait = baitOptions[baitIndex];

            // Show fishing animation
            showFishingAnimation();

            // Simulate fishing delay
            setTimeout(() => {
                const result = determineCatch(bait.length, location);
                hideFishingAnimation();
                showCatchResult(result);

                // Add to bag after showing result
                setTimeout(() => {
                    addToBag(result);
                    hideCatchResult();
                    checkGameOver();
                }, 2000);
            }, 2000); // 2 second fishing animation
        }

        function determineCatch(baitLength, location) {
            const locationFish = fishDatabase[location];

            // Try to find a matching fish
            for (let fish of locationFish) {
                if (fish.length === baitLength) {
                    return { type: 'fish', ...fish, location };
                }
            }

            // No match - caught trash
            const trashList = trashItems[location];
            const trash = trashList[Math.floor(Math.random() * trashList.length)];
            return { type: 'trash', ...trash, location };
        }

        function showFishingAnimation() {
            const video = document.getElementById('fishingVideo');
            const overlay = document.getElementById('fishingOverlay');
            const castSound = document.getElementById('castSound');
            const wowSound = document.getElementById('wowSound');

            // Play cast sound
            castSound.currentTime = 0;
            castSound.play().catch(e => console.log('Sound play prevented:', e));

            // Set up wow sound to play near the end of the video
            let wowPlayed = false;
            const playWowNearEnd = () => {
                const timeRemaining = video.duration - video.currentTime;
                // Play wow sound in the last second if not already played
                if (!wowPlayed && timeRemaining <= 1 && timeRemaining > 0) {
                    wowSound.currentTime = 0;
                    wowSound.play().catch(e => console.log('Wow sound play prevented:', e));
                    wowPlayed = true;
                }
            };

            // Listen for video time updates
            video.addEventListener('timeupdate', playWowNearEnd);

            // Clean up listener when video ends
            video.addEventListener('ended', () => {
                video.removeEventListener('timeupdate', playWowNearEnd);
            }, { once: true });

            overlay.classList.add('active');
            video.currentTime = 0; // Reset to start
            video.play();
        }

        function hideFishingAnimation() {
            const video = document.getElementById('fishingVideo');
            const overlay = document.getElementById('fishingOverlay');

            video.pause();
            overlay.classList.remove('active');
        }

        function showCatchResult(result) {
            const catchResult = document.getElementById('catchResult');
            const catchImage = document.getElementById('catchImage');
            const catchMessage = document.getElementById('catchMessage');

            // Play appropriate sound
            const sound = result.type === 'fish'
                ? document.getElementById('catchFishSound')
                : document.getElementById('catchTrashSound');
            sound.currentTime = 0;
            sound.play().catch(e => console.log('Sound play prevented:', e));

            catchImage.src = result.image;
            catchMessage.textContent = `You caught a ${result.name}!`;
            catchMessage.className = `catch-message ${result.type}`;

            catchResult.classList.remove('show');
            void catchResult.offsetWidth; // Trigger reflow
            catchResult.classList.add('show');
        }

        function hideCatchResult() {
            document.getElementById('catchResult').classList.remove('show');
        }

        function addToBag(item) {
            fishBag.push(item);

            if (item.type === 'fish') {
                caughtFishTypes.add(item.name);
            }

            renderBagGrid();
            renderFishGrid();
            updateStats();
        }

        function renderBagGrid() {
            const grid = document.getElementById('bagGrid');
            grid.innerHTML = '';

            // Render 16 slots
            for (let i = 0; i < 16; i++) {
                const slot = document.createElement('div');
                slot.className = 'bag-slot';

                if (i < fishBag.length) {
                    const item = fishBag[i];
                    slot.classList.add('filled');

                    // Check if this item doesn't help towards the goal
                    let isUnhelpful = false;

                    if (item.type === 'trash') {
                        // Trash never helps
                        isUnhelpful = true;
                    } else if (item.type === 'fish') {
                        // Check if this is a duplicate (caught before this slot)
                        const previouslyCaught = fishBag.slice(0, i).some(prev =>
                            prev.type === 'fish' && prev.name === item.name
                        );
                        if (previouslyCaught) {
                            isUnhelpful = true;
                        }

                        // Add checkmark to ALL fish in our collection (first catch and all duplicates)
                        if (caughtFishTypes.has(item.name)) {
                            slot.classList.add('duplicate');
                        }
                    }

                    if (isUnhelpful) {
                        slot.classList.add('unhelpful');
                    }

                    slot.innerHTML = `<img src="${item.image}" alt="${item.name}">`;
                }

                grid.appendChild(slot);
            }
        }

        function renderFishGrid() {
            const grid = document.getElementById('fishGrid');
            grid.innerHTML = '';

            // Render all fish species
            for (let location in fishDatabase) {
                fishDatabase[location].forEach(fish => {
                    const fishItem = document.createElement('div');
                    const caught = caughtFishTypes.has(fish.name);
                    fishItem.className = `fish-item ${caught ? 'caught' : 'uncaught'}`;
                    fishItem.innerHTML = `
                        <img src="${fish.image}" alt="${fish.name}">
                        <div class="fish-name">${caught ? fish.name : '???'}</div>
                    `;
                    grid.appendChild(fishItem);
                });
            }
        }

        function updateStats() {
            document.getElementById('uniqueCount').textContent = `${caughtFishTypes.size}/12`;
            document.getElementById('totalCount').textContent = `${fishBag.length}/16`;
        }

        function checkGameOver() {
            // Win condition: caught all 12 unique fish
            if (caughtFishTypes.size === 12) {
                showGameOver(true);
                return;
            }

            // Loss condition: bag full without all 12 fish
            if (fishBag.length >= 16 && caughtFishTypes.size < 12) {
                showGameOver(false);
                return;
            }
        }

        function showGameOver(won) {
            const gameOver = document.getElementById('gameOver');
            const overlay = document.getElementById('overlay');
            const title = document.getElementById('gameOverTitle');
            const message = document.getElementById('gameOverMessage');
            const location = document.getElementById('finalLocation');

            if (won) {
                gameOver.classList.remove('loss');
                title.textContent = 'üéâ AMAZING WORK, TYLER! üéâ';
                message.textContent = 'You caught all 12 fish like a true master angler!';
                location.textContent = FINAL_LOCATION;
                location.style.display = 'block';
                message.insertAdjacentHTML('afterend', '<p>Your next clue is hidden at:</p>');
            } else {
                gameOver.classList.add('loss');
                title.textContent = 'üòû BAG FULL!';
                message.textContent = `You caught ${caughtFishTypes.size} out of 12 fish before your bag filled up. Try using the right bait in the right location!`;
                location.style.display = 'none';
            }

            gameOver.classList.add('show');
            overlay.classList.add('show');
        }

        function resetGame() {
            fishBag = [];
            caughtFishTypes = new Set();

            document.getElementById('gameOver').classList.remove('show');
            document.getElementById('overlay').classList.remove('show');

            renderBagGrid();
            renderFishGrid();
            updateStats();
        }

        // Start the game
        init();
    </script>
</body>
</html>